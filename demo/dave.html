<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }


        ul li {
            list-style: none;
        }

        body {
        / / background: #000;
            width: 100%;
        }

        #dh_cursor {
            position: fixed;
            z-index: 99;
            left: 0;
            top: 0;
            pointer-events: none;
            will-change: transform;
            mix-blend-mode: difference;
        }


        @media (hover: hover) and (pointer: fine) {
            .dh_cursor__circle {
                width: 20px;
                height: 20px;
                margin-top: -50%;
                margin-left: -50%;
                border-radius: 50%;
                background: #fff;
                transition: opacity 0.3s cubic-bezier(0.25, 1, 0.5, 1), background-color 0.3s cubic-bezier(0.25, 1, 0.5, 1), width 0.3s cubic-bezier(0.25, 1, 0.5, 1), height 0.3s cubic-bezier(0.25, 1, 0.5, 1);
            }

            #dh_cursor.menu .dh_cursor__circle {
                width: 110px;
                height: 110px;
                background-color: rgba(225, 225, 225, 1);
                border: 1px solid rgba(227, 222, 193, 0.95);
            }
        }


        .elementor-nav-menu {
            display: inline-flex;
            justify-content: flex-end;
        }

        .menu-list {
            padding: 50px;
            position: absolute;
            width: 100%;
            z-index: 8;
            display: flex;
            justify-content: space-between;
        }

        .menu-item {
            padding: 20px;
        }

        .menu-item a {
            color: #ffffff;
            text-decoration: none;
            transition: 0.25s ease;
            font-size: 1.2rem;
        }

        .section-bg {
            width: 100vw;
            height: 100svh;
            position: absolute;
            left: 0;
            top: 0;
            transition: all 0.4s ease;
            opacity: 0.9;
            mix-blend-mode: hard-light;

        }

        .section-bg .bg-color {
            background: linear-gradient(rgb(91, 0, 255) 0%, rgb(0, 215, 214) 100%);
            width: 100vw;
            height: 100svh;
            position: absolute;
            opacity: 1;
        }

        .absolute {
            position: absolute;
            top: 0;
            left: 0;
        }

        .f-screen {
            width: 100vw;
            height: 100svh;
        }

        .section {
            position: relative;
            width: 100vw;
            height: 100vh;
        }


        .section-1 {
            perspective: 400px;
            overflow: hidden;

        }

        .section-content {
            width: 100%;
            position: absolute;
            left: 0;
            top: 0;
            padding-top: 0.0157svh;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 90;
        }


        .hey-content {
            transform: translate3d(0px, 0px, 0px) scale(0.8503, 0.8503);
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            width: 80%;
        }

        .mask-wrapper {
            background: #000;
            position: absolute;
            top: 0;
            width: 100%;
            height: 100svh;
            z-index: 99999;
        }

        .mask {
            position: absolute;
            margin: 200px;
            height: calc(100svh - 400px);
            overflow: hidden;
            width: calc(100vw - 400px);
            z-index: 999;
            display: flex;
            justify-content: space-between;
        }

        .mask-item {
            background: #000;
            width: 50%;
            height: 100%;
        }

        #dh_preloader {
            transform: translateY(-100vh);
            height: 100svh;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 9999;
        }

        .dh_transition_scale_wrapper {
            position: fixed;
            top: 0;
            width: 100vw;
            height: 100svh;
            opacity: 0;
            box-shadow: 0 0 0 1000px #000;
            pointer-events: none;
            z-index: 9999;
        }


    </style>
</head>
<body>
<!--光标-->
<div id="dh_cursor">
    <div class="dh_cursor__circle"></div>
</div>
<div>
    <div id="dh_preloader">

    </div>
    <div class="dh_transition_scale_wrapper"></div>
    <div class="dh_home_transitions">
        <div class="mask">
            <div class="mask-item curtain_left curtain_top"></div>
            <div class="mask-item curtain_right curtain_bottom"></div>
        </div>
    </div>
</div>


<div class="menu-list">
    <div class="logo">LOGO</div>
    <ul class="elementor-nav-menu" cursor-class="menu">
        <li class="menu-item">
            <a href="#">Work</a>
        </li>
        <li class="menu-item">
            <a href="@">About</a>
        </li>
        <li class="menu-item">
            <a href="https://www.baidu.com">Lab</a>
        </li>
    </ul>
</div>
<div class="container">
    <div class="section section-1">
        <div class="section-content">
            <div class="hey-content">
                <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
                <lottie-player
                        src="https://lottie.host/8b669e32-db63-4c58-bc2b-be9964424e7e/8qtwfSbLzC.json"
                        background="transparent" speed="2" style="width: 80vw;"
                        direction="1"
                        mode="normal"
                        class="hey_3d_animation"></lottie-player>


            </div>
        </div>
        <div class="section-bg">
            <div class="bg-color"></div>
        </div>

    </div>
</div>

<script type="module">
    import {gsap} from "gsap";

    window.MOTIONPAGE_FRONT = {version: "2.1.6"}

    window.MOTIONPAGE_FRONT.mouse = {
        pos: {
            x: 0,
            y: 0
        },
        isWithinTarget(t) {
            return this.pos.x >= t.left && this.pos.x <= t.right && this.pos.y >= t.top && this.pos.y <= t.bottom
        },
        posWithinTarget(t, e, o) {
            let i = typeof e == "string" ? document.querySelector(e) : e;
            if (!i)
                return {
                    v: -1
                };
            let r = i.getBoundingClientRect();
            return this.isWithinTarget(r) ? {
                v: (this.pos[t] - r[t === "x" ? "left" : "top"]) / r[t === "x" ? "width" : "height"],
                wt: !0
            } : {
                v: o,
                wt: !1
            }
        },
        scrollbarWidth: -1,
        getScrollbarWidth() {
            if (this.scrollbarWidth !== -1)
                return this.scrollbarWidth;
            let t = document.createElement("div");
            t.style.overflow = "scroll",
                document.body.appendChild(t);
            let e = t.offsetWidth - t.clientWidth;
            return document.body.removeChild(t),
                this.scrollbarWidth = e + 1,
                e
        },
        distance(t) {
            let e = typeof t == "string" ? document.querySelector(t) : t;
            if (!e)
                return -1;
            let o = e.getBoundingClientRect();
            if (!o || !this.isWithinTarget(o))
                return -1;
            let i = o.left + o.width / 2
                , r = o.top + scrollY + o.height / 2
                , s = Math.sqrt(Math.pow(this.pos.x - i, 2) + Math.pow(this.pos.y + scrollY - r, 2))
                , n = Math.sqrt(Math.pow(innerWidth / 2, 2) + Math.pow(innerHeight / 2, 2));
            return 1 - s / n
        },
        smoothEnter(t, e, o, i) {
            gsap.ticker.remove(t),
                e.tweenFromTo(e.time(), e.totalDuration() * o, {
                    onComplete() {
                        gsap.ticker.add(t)
                    },
                    duration: i / 1e3,
                    ease: "none"
                })
        },
        smoothLeave(t, e) {
            t.progress < e.progress() ? gsap.to(e, t) : e.tweenTo(t.progress, t)
        }
    }
    document.body.addEventListener("mousemove", t => {
            window.MOTIONPAGE_FRONT.mouse && (window.MOTIONPAGE_FRONT.mouse.pos = {
                x: t.clientX,
                y: t.clientY
            })
        }
    );
    document.addEventListener('DOMContentLoaded', function () {
        const cursor = document.querySelector('#dh_cursor');
        const cursorCircle = cursor.querySelector('.dh_cursor__circle');


        const mouse = {x: -100, y: -100}; // mouse pointer's coordinates
        const pos = {x: 0, y: 0}; // cursor's coordinates
        const speed = 0.2; // cursor movement speed (between 0 and 1)

        // Function to update mouse coordinates based on mousemove event.
        const updateCoordinates = e => {
            mouse.x = e.clientX;
            mouse.y = e.clientY;
        }
        window.addEventListener('mousemove', updateCoordinates);


        function getAngle(diffX, diffY) {
            return Math.atan2(diffY, diffX) * 180 / Math.PI;
        }

        // Function to calculate the squeeze effect based on cursor movement.
        function getSqueeze(diffX, diffY) {
            const distance = Math.sqrt(
                Math.pow(diffX, 2) + Math.pow(diffY, 2)
            );
            const maxSqueeze = 0.15;
            const accelerator = 1500;
            return Math.min(distance / accelerator, maxSqueeze);
        }

        const updateCursor = () => {
            const diffX = Math.round(mouse.x - pos.x);
            const diffY = Math.round(mouse.y - pos.y);

            pos.x += diffX * speed;
            pos.y += diffY * speed;

            const angle = getAngle(diffX, diffY);
            const squeeze = getSqueeze(diffX, diffY);

            const scale = 'scale(' + (1 + squeeze) + ', ' + (1 - squeeze) + ')';
            const rotate = 'rotate(' + angle + 'deg)';
            const translate = 'translate3d(' + pos.x + 'px ,' + pos.y + 'px, 0)';

            // Apply transformations to the cursor and cursorCircle elements.
            cursor.style.transform = translate;
            cursorCircle.style.transform = rotate + scale;
        }

        function loop() {
            updateCursor();
            requestAnimationFrame(loop);
        }

        // Start the animation loop.
        requestAnimationFrame(loop);

        // Select all elements with the attribute cursor-class
        const cursorModifiers = document.querySelectorAll('[cursor-class]');

        // Apply different functions for each mouse enter and leave event
        cursorModifiers.forEach(cursorModifier => {
            cursorModifier.addEventListener('mouseenter', function () {
                const className = this.getAttribute('cursor-class');
                cursor.classList.add(className);
            });

            cursorModifier.addEventListener('mouseleave', function () {
                const className = this.getAttribute('cursor-class');
                cursor.classList.remove(className);
            });

        });
    })
    window.addEventListener('load', () => {
        // hey的循环动画
        const context = gsap.context(() => {
            gsap.timeline()
                .to('.hey-content', {
                    scale: .8,
                    ease: "sine.inOut",
                    duration: 4
                })
                .to('.section-content', {
                    "padding-top": "5svh",
                    duration: 4
                }).yoyo(!0).repeat(-1)
        })
        window._$W = window;

        if (matchMedia("screen and (min-width: 1100px)").matches) {


            gsap.context(() => {
                gsap.timeline()
                    .to(".dh_home_transitions", {
                        display: "none",
                        duration: .1
                    }, 4.1)
                    .to(".curtain_left", {
                        transformOrigin: "0% 50%",
                        width: "0px",
                        ease: "power4.inOut",
                        duration: 1.5
                    }, 2.6)
                    .to(".curtain_right", {
                        transformOrigin: "100% 50%",
                        width: "0px",
                        ease: "power4.inOut",
                        duration: 1.5
                    }, 2.6)
                    .to("#dh_preloader", {
                        display: "none",
                        duration: .1
                    }, 0)
                    .from(".dh_transition_scale_wrapper", {
                        width: "calc(100vw - 400px)",
                        height: "calc(100vh - 400px)",
                        margin: "200px",
                        "border-radius": "10px",
                        ease: "power3.inOut",
                        duration: .8
                    }, 4.8)
                    .from(".home_animation_wrapper", {
                        scale: .87,
                        transformOrigin: "55% 33%",
                        ease: "power3.inOut",
                        duration: .8
                    }, 4.8)
                    .fromTo(".dh_transition_scale_wrapper", {autoAlpha: 1}, {
                        autoAlpha: 1,
                        duration: .1
                    }, 0).to(".dh_transition_scale_wrapper", {
                    autoAlpha: 0,
                    duration: .1
                }, 5.6)

            })



            gsap.context(() => {
                function _tix() {
                    _$W.tl.progress(_$W.MOTIONPAGE_FRONT.mouse.pos.x / (_$W.innerWidth - _$W.MOTIONPAGE_FRONT.mouse.getScrollbarWidth()))
                }

                function _tix_FMM() {
                    _$W.tl2.progress(_$W.MOTIONPAGE_FRONT.mouse.pos.y / _$W.innerHeight)
                }

                _$W.tl = gsap.timeline().fromTo(".section-content", {
                    rotationX: 0,
                    rotationY: 0,
                    rotationZ: 0,
                    xPercent: 0,
                    yPercent: 0
                }, {
                    rotationX: 10,
                    rotationY: 10,
                    rotationZ: 10,
                    xPercent: 15,
                    yPercent: 0
                }, 0);

                _$W.tl2 = gsap.timeline().fromTo(".section-content", {
                    scale: 1,
                    skewX: "0deg"
                }, {
                    scale: 1.1,
                    skewX: "20deg"
                }, 0);

                gsap.ticker.add(_tix)
                gsap.ticker.add(_tix_FMM)
                return () => {
                    gsap.ticker.remove(_tix)
                    gsap.ticker.remove(_tix_FMM)
                }
            });
        }
    })
</script>
</body>
</html>
